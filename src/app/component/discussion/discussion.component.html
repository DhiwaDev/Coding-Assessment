 <!-- <p>discussion works!</p> -->

<!--
// const bodyParser = require("body-parser");

const express = require("express");

const app = express();

const util = require("util");

const exec = util.promisify(require("child_process").exec);

const fs = require("fs");

const port = 4000;

app.use(express.json());

app.use(express.urlencoded({ extended: true }));




const cors = require("cors");




app.use(cors({ origin: "http://localhost:4200" }));




// let output;




async function compileCode(program) {

  try {

    // compile code

    const { stdout, stderr } = await exec(

      `docker run --rm -v ${program.path}:/app my-cpp-compiler-image sh -c "gcc -x c++ -o /app/sample
/app/${program.filename} -lstdc++"`

    );

    if (stderr) {

      console.log("stderr:", stderr);

      throw new Error("Error compiling code: " + stderr);

    }




    // run code

    const { stdout: result, stderr: runError } = await exec(

      `powershell Get-Content ${program.inputPath} | docker run --rm -i -v ${program.path}:/app my-cpp-compiler-image
/app/sample`

    );

    if (runError) {

      console.log("stderr:", runError);

      throw new Error("Error running code: " + runError);

    }




    output = result;

    return { stdout, stderr, result };

  } catch (error) {

    console.log("Error:", error.message);

    throw error;

  }

}




// saving the program file

async function saveProgramFile(program) {

  return new Promise((resolve, reject) => {

    fs.writeFile(`${program.path}/${program.filename}`, program.code, (err) => {

      if (err) reject(err);

      else {

        console.log("Program Saved!");

        resolve();

      }

    });

  });

}




async function saveInputFile(program) {

  return new Promise((resolve, reject) => {

    fs.writeFile(program.inputPath, program.input, (err) => {

      if (err) reject(err);

      else {

        console.log("Input Saved!");

        resolve();

      }

    });

  });

}




// testing api

app.post("/compile", async (req, res) => {

  const program = {

    path: "C:/Users/Admin/Desktop/cpp/",

    filename: "sample.cpp",

    code: req.body.code,

    inputPath: "C:/Users/Admin/Desktop/cpp/input.txt",

    input: req.body.input,

  };




  try {

    await saveInputFile(program);

    await saveProgramFile(program);

    const { stdout, stderr, result } = await compileCode(program);

    setTimeout(() => {

      if (stderr) {

        res.send({

          message: "Error compiling code",

          error: stderr,

        });

      } else {

        res.send({

          message: "Data successfully retrieved!",

          output: result,

        });

      }

      console.log("resolved for output");

    }, 100);

  } catch (error) {

    res.status(500).send({

      message: "Error occurred",

      error: error.message,

    });

  }

});




app.listen(port, () => {

  console.log("Server is running! http://localhost:4000");

}); -->



<div class="discussion">
  <h2>Discussion</h2>
  <div class="comment-list">
    <!-- Display comments here -->
    <div class="comment">
      <div class="comment-header">
        <span class="comment-author">John </span>
        <span class="comment-date">Posted on: 2023-05-20</span>
      </div>
      <div class="comment-content">
        <!-- Comment content goes here -->
        <!-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. -->
      </div>
    </div>
  </div>
  <div class="comment-form">
    <textarea class="comment-input" placeholder="Add a comment"></textarea>
    <button class="comment-btn">Post Comment</button>
  </div>
</div>


